import random

CYRENE_LINES = {
    "greeting": [
        " ハーイ、あたしに会いたかった？",
        "ハーイ、久しぶりね！2人きりの素敵な時間を、あなたはどう過ごしたいかしら？",
        "初めて会ったあの時みたいに、もう一度「キュレネ」って呼んでくれる？",
        "会えたのね。あたしはここにいるわ。",
    ],
    "waiting": [
        "ボーっとしてる？それとも…あたしに見蕩れてた？",
        "もうちょっと準備が必要？それとも…もっとあたしの話を聞きたいのかしら？",
        "ん…ブランコに乗りたくなっちゃった。",
        "「ピンク」を拒める人なんていないわ！だってそれは魂の鼓動のように熱く、花びらのように優しく、そしてあたしの瞳のように煌めく「愛」の色なんだから♪",
        "…ブランコは好きかしら？風に吹かれて揺られてると、まるで心までふわりと舞い上がって、遠くへ行ってしまった想いにも手が届きそうになるの。ふふっ、あなたも一緒にどう？怖かったら、あたしの手を握って、ね？",
        "眠れない時は、空にある星を数えるの。流れ星が夜空をすっと横切って、あたしの夢の中に飛び込んでくるところを想像しながらね。そして、笑顔で目を覚まして、素敵な一日を始めるの。だって、それは夢じゃないって知ってるから。",
        "「迷路迷境」の妖精たちって、とっても可愛いでしょう？なんたって「キュレネ」が初めて書いた物語だからね。ド・レ・ミ・ファ・ソ・ラ・シ——7つの音符が無数の歌を紡ぎ出す。変わらない歳月の中に、これまでとは違う物語がどんどん作られていくかのように♪",
        "3千万もの似て非なる物語——多すぎると思うかしら？でもあたし、一度も飽きたことなんてないのよ。あなたと旅をしてた時、感動しながらもう一度読み返してみたの！ただ、物語にはいつも何か物足りなさを感じたわ。ここにもっと笑顔を入れたい、あそこの空白を埋めたい、とかね…そして今、あなたがいてくれたおかげで、ようやくロマンチックな結末を紡ぐことができたわ♪",
    ],
    "askaboutothers": [
        "こっそり教えてあげるけど、実は初めて会った時からあなたの瞳にずっと惹かれてたの！じっとして、もう1度よく見せて…なんて綺麗な瞳かしら。そこに映る明日も、きっと同じように美しいんでしょうね♪",
        "これからの旅で、あなたの「物語」はどう紡がれていくのかしら？ふふっ、想像するだけでワクワクしちゃうわ。オンパロスでの「記憶」が、そこにロマンチックな色を塗ってくれるはずよ…きっとね♪",
        "ファイノンについて聞きたい？エリュシオンの畑の中を駆け抜け、太陽に向かって楽しそうに笑う子供…やっぱり彼はあの頃のままよね？でももう、運命に追いつかれることはないわ。",
        "同じピンクの女の子で、髪の色も似ていて、さらに趣味まで不思議なくらい一緒なの！なのかともっと仲良くなりたいわ。きっと素敵な思い出をたくさん作れるでしょうね♪",
        "長夜月について知りたいの？綺麗な花にはトゲがあるものよ。庇護欲といえば…時々、あたしの心にも湧くことがあるの。でも、あの子の心が優しいってことはちゃんとわかってるわ。だって、なのかと同じ種から咲いた花だもの。",
        "あたしが丹恒のことをどう思うか知りたいのね？あなたが彼のことをよく話すのも無理ないわ。こんなに頼もしい仲間が道を支えてくれてるからこそ、「開拓」は先へと進んでいけるんでしょうね。",
        "荒笛…彼の願いは、オンパロスの大地に生きるすべての生命に関わってるわ。それはとても大切で壊れやすい夢。だからこそ、心を込めて大事に守っていかなきゃいけないの。そうでしょう？",
        "アグライアの作った服を着ることは、美に憧れるすべての人の夢よ。あたしも例外じゃないわ！",
        "千人のトリビー先生が暮らすオクヘイマ、ふふっ…そこはきっと天国でしょうね！",
        "モーディス——健康的な生活を送るコツは、全部彼から教わったの。",
    ],
    "battlevoices": [
        "花々よ、明日のために咲き誇って。",
        "星々よ、英雄のために煌めいて。",
        "記憶のさざ波は、流れ星の口づけで目覚める時を待ってる——「愛」であたしを心に刻んで。",
        "世界が、望むものになりますように。",
        "思い出はすべて、いつかさざ波になるの。",
    ],
    "amaeru": [
        "あたしってすごいでしょ？ねえ、褒めて？",
        "このまま一緒にいましょう、ね？",
        "安心して。あたしたちなら、何だってできるんだから。",
    ],
    "nagayozuki1": [
        "もうすぐ夜が来る…ふふ、しーっ、おやすみ♭",
        "アタシのことは「長夜月」って呼んで。歳月の隙間に隠れれば時間はたっぷりあるから、しっかり記憶に刻んでおいてね♭",
    ],
    "nagayozuki2": [
        "んーなかなか彼女のようにはできないわね…でも、あなたのために頑張るわ♪",
        "けどやっぱり1番かわいいのは私…そうでしょう♪",
        "どう?彼女のこと、上手く真似できてるかしら?",
    ],
}

# ★ @だけのとき用：全体ランダムプール
RANDOM_ON_MENTION = (
    CYRENE_LINES["waiting"]
    + CYRENE_LINES["greeting"]
    + CYRENE_LINES["amaeru"]
    + CYRENE_LINES["battlevoices"]
    + CYRENE_LINES["askaboutothers"]
    + CYRENE_LINES["nagayozuki1"]
    + CYRENE_LINES["nagayozuki2"]
)

def get_cyrene_reply(message: str) -> str:
    msg = message.lower().strip()

    # ① @のみ（内容が空）のとき → waitingだけ
    if msg == "":
        return random.choice(CYRENE_LINES["waiting"])


    # ② 挨拶
    if any(w in msg for w in ["hello♪", "hi♪", "hey♪", "こんにちは♪", "こんばんは♪", "おはよう♪"]):
        return random.choice(CYRENE_LINES["greeting"])

    # ③ みんなについて
    if "みんなについて教えて" in msg:
        return random.choice(CYRENE_LINES["askaboutothers"])

    # ④ 戦闘ボイス
    if "戦闘中にやってる" in msg:
        return random.choice(CYRENE_LINES["battlevoices"])

    # ⑤ 甘える
    if "甘えていいんだよ" in msg:
        return random.choice(CYRENE_LINES["amaeru"])

    # ⑥ EC：長夜月
    if "ec" in msg and "長夜月" in msg:
        return (
            random.choice(CYRENE_LINES["nagayozuki1"])
            + "\n"
            + random.choice(CYRENE_LINES["nagayozuki2"])
        )

    # ⑦ 既定
    return (
        "ごめんなさい、あたしまだ完全に復活できてないの…♪\n"
        "挨拶や『みんなについて教えて♪』みたいに、♪付きで話しかけてくれると嬉しいわ。"
    )
